<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zxk175.well.module.dao.sys.SysMenuDao">

    <select id="listByUserId" resultType="com.zxk175.well.module.entity.sys.SysMenu"
            parameterType="com.zxk175.well.common.model.param.sys.menu.SysMenuListParam">
        SELECT
            sm.`name`,
            sm.parent_id AS parentId,
            sm.menu_id AS menuId,
            sm.icon,
            sm.url,
            sm.perms,
            sm.type
        FROM
            t_sys_user_role AS ur
            LEFT JOIN t_sys_role_menu AS rm ON ur.role_id = rm.role_id
            LEFT JOIN t_sys_menu AS sm ON sm.menu_id = rm.menu_id
        WHERE
            <![CDATA[ sm.type < #{menuType} ]]>
            AND ur.user_id = #{userId}
        ORDER BY sm.sort
    </select>
</mapper>
